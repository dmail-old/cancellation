{
  "version": 3,
  "sources": [
    "test/cancel-during-start-server.js"
  ],
  "names": [
    "token",
    "cancellationToken",
    "cancel",
    "exec",
    "serverPromise",
    "Promise",
    "resolve",
    "setTimeout",
    "then",
    "values",
    "assert",
    "deepEqual",
    "console",
    "log",
    "responsePromise",
    "fail"
  ],
  "mappings": ";;AAAA;;AACA;;AACA;;;;AAEA;AACE,QAAM;AAAEA,IAAAA,KAAK,EAAEC,iBAAT;AAA4BC,IAAAA;AAA5B,MAAuC,sCAA7C;;AAEA,QAAMC,IAAI,GAAG,YAAY;AACvB,UAAMC,aAAa,GAAG,2BAAY;AAAEH,MAAAA;AAAF,KAAZ,CAAtB;AACA,UAAM,IAAII,OAAJ,CAAaC,OAAD,IAAaC,UAAU,CAACD,OAAD,CAAnC,CAAN;AACAJ,IAAAA,MAAM,CAAC,QAAD,CAAN,CAAiBM,IAAjB,CAAuBC,MAAD,IAAY;AAChCC,sBAAOC,SAAP,CAAiBF,MAAjB,EAAyB,CAAC,8BAAD,CAAzB;;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD,KAHD;AAIA,UAAMT,aAAN;AACA,UAAMU,eAAe,GAAG,6BAAc;AAAEb,MAAAA;AAAF,KAAd,CAAxB;AACA,UAAMa,eAAN;;AACAJ,oBAAOK,IAAP,CAAY,oBAAZ;AACD,GAXD;;AAYAZ,EAAAA,IAAI,GAAGK,IAAP,CAAY,MAAM;AAChBE,oBAAOK,IAAP,CAAY,oBAAZ;AACD,GAFD;AAGD",
  "sourcesContent": [
    "import { createCancellationSource } from \"../index.js\"\nimport { startServer, requestServer } from \"./fixtures.js\"\nimport assert from \"assert\"\n\n{\n  const { token: cancellationToken, cancel } = createCancellationSource()\n\n  const exec = async () => {\n    const serverPromise = startServer({ cancellationToken })\n    await new Promise((resolve) => setTimeout(resolve))\n    cancel(\"cancel\").then((values) => {\n      assert.deepEqual(values, [\"server closed because cancel\"])\n      console.log(\"passed\")\n    })\n    await serverPromise\n    const responsePromise = requestServer({ cancellationToken })\n    await responsePromise\n    assert.fail(\"must not be called\")\n  }\n  exec().then(() => {\n    assert.fail(\"must not be called\")\n  })\n}\n"
  ]
}